<div>
  <!--
    Search: <input ng-model="query">
    Sort by:
    <select ng-model="orderProp">
      <option value="fileName">Alphabetical</option>
      <option value="path">Path</option>
    </select>

  -->

  <ul class="movies" ng-class="view.mode">
    <li ng-controller="MovieListItemCtrl" ng-repeat="movie in movies | filter:query | orderBy:orderProp track by movie.path" class="movie-listing">

      <div class="movie">

        <ul class="options">
          <li class="glyphicon glyphicon-play-circle play" title="Play" ng-click="play(movie)"></li>
          <li class="glyphicon glyphicon-info-sign details" title="Show details" ng-click="info(movie)"></li>
          <li class="glyphicon glyphicon-ban-circle markhide" title="Hide from list" ng-click="hide(movie)"></li>
          <li class="glyphicon glyphicon-eye-open markwatched" title="Mark as watched" ng-click="watched(movie)"></li>
        </ul>


        <div class="poster">
          <a ng-if="movieInfo" href="#/movie/{{movie.fileName}}">
            <img ng-src="http://image.tmdb.org/t/p/w185{{movieInfo.poster_path}}">
          </a>
          <img ng-if="!movieInfo" ng-src="img/poster-placeholder.png">
        </div>

        <div class="info">

          <div ng-if="movieInfo">
            <div class="titleblock">
              <div class="title">{{movieInfo.title}}</div>
              <div class="year">({{movieInfo.release_date | date:'yyyy'}})</div>
            </div>
            <div class="infoblock">
              <div class="tagline">{{movieInfo.tagline}}</div>
              <p>
                <div>{{movieInfo.runtime}} min - {{genres()}}</div>
                <div>{{countries()}}</div>
              </p>
              <p>
                <div class="overview">{{movieInfo.overview}}</div>
              </p>
            </div>
          </div>

          <div ng-hide="movieInfo">
            <div class="titleblock">
              <div class="title">{{movie.fileName}}</div>
              <div class="year">-</div>
            </div>
            <div class="infoblock">
              <div>Loading information...</div>
            </div>
          </div>

        </div>

      </div>
    </li>

    <!--
      Ugly hack to snap the last row to the grid.
      Otherwise, the elements in that row take 100% of the available width.
    //-->
    <li class="lastrowtogrid" ng-repeat="n in [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0] track by $index" class="movie-listing"></li>
  </ul>
</div>
